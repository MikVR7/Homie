<mxfile host="app.diagrams.net">
  <diagram name="Financial Manager" id="fin-mgr">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- FinancialManagerApp -->
        <mxCell id="2" value="FinancialManagerApp" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="700" y="40" width="300" height="160" as="geometry" />
        </mxCell>
        <mxCell id="3" value="- event_bus: EventBus&#xa;- db_service: ModuleDatabaseService&#xa;- account_manager: AccountManager&#xa;- transaction_manager: TransactionManager&#xa;- report_generator: ReportGenerator" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="2">
          <mxGeometry y="26" width="300" height="84" as="geometry" />
        </mxCell>
        <mxCell id="4" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="2">
          <mxGeometry y="110" width="300" height="8" as="geometry" />
        </mxCell>
        <mxCell id="5" value="+ start(): void&#xa;+ stop(): void&#xa;+ get_financial_summary(): dict" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="2">
          <mxGeometry y="118" width="300" height="42" as="geometry" />
        </mxCell>
        
        <!-- Account Entity -->
        <mxCell id="6" value="«entity»&#xa;Account" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="100" y="250" width="250" height="180" as="geometry" />
        </mxCell>
        <mxCell id="7" value="+ account_id: TEXT PRIMARY KEY&#xa;+ user_id: TEXT&#xa;+ account_name: TEXT&#xa;+ account_type: AccountType&#xa;+ balance: REAL&#xa;+ currency: TEXT = 'EUR'&#xa;+ created_at: TIMESTAMP&#xa;+ updated_at: TIMESTAMP" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="6">
          <mxGeometry y="40" width="250" height="120" as="geometry" />
        </mxCell>
        <mxCell id="8" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="6">
          <mxGeometry y="160" width="250" height="8" as="geometry" />
        </mxCell>
        <mxCell id="9" value="+ update_balance(): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="6">
          <mxGeometry y="168" width="250" height="12" as="geometry" />
        </mxCell>
        
        <!-- Transaction Entity -->
        <mxCell id="10" value="«entity»&#xa;Transaction" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="400" y="250" width="250" height="220" as="geometry" />
        </mxCell>
        <mxCell id="11" value="+ transaction_id: TEXT PRIMARY KEY&#xa;+ account_id: TEXT&#xa;+ amount: REAL&#xa;+ category: TEXT&#xa;+ subcategory: TEXT&#xa;+ description: TEXT&#xa;+ date: DATE&#xa;+ type: TransactionType&#xa;+ receipt_path: TEXT&#xa;+ tax_relevant: BOOLEAN&#xa;+ created_at: TIMESTAMP" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="10">
          <mxGeometry y="40" width="250" height="160" as="geometry" />
        </mxCell>
        <mxCell id="12" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="10">
          <mxGeometry y="200" width="250" height="8" as="geometry" />
        </mxCell>
        <mxCell id="13" value="+ validate(): bool" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="10">
          <mxGeometry y="208" width="250" height="12" as="geometry" />
        </mxCell>
        
        <!-- Construction Budget Entity -->
        <mxCell id="14" value="«entity»&#xa;ConstructionBudget" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="700" y="250" width="250" height="180" as="geometry" />
        </mxCell>
        <mxCell id="15" value="+ project_id: TEXT PRIMARY KEY&#xa;+ user_id: TEXT&#xa;+ project_name: TEXT&#xa;+ total_budget: REAL&#xa;+ spent_amount: REAL&#xa;+ category: TEXT&#xa;+ supplier: TEXT&#xa;+ created_at: TIMESTAMP" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="14">
          <mxGeometry y="40" width="250" height="120" as="geometry" />
        </mxCell>
        <mxCell id="16" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="14">
          <mxGeometry y="160" width="250" height="8" as="geometry" />
        </mxCell>
        <mxCell id="17" value="+ calculate_remaining(): REAL" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="14">
          <mxGeometry y="168" width="250" height="12" as="geometry" />
        </mxCell>
        
        <!-- Securities Entity -->
        <mxCell id="18" value="«entity»&#xa;Security" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="1000" y="250" width="250" height="200" as="geometry" />
        </mxCell>
        <mxCell id="19" value="+ security_id: TEXT PRIMARY KEY&#xa;+ user_id: TEXT&#xa;+ symbol: TEXT&#xa;+ name: TEXT&#xa;+ quantity: REAL&#xa;+ purchase_price: REAL&#xa;+ current_price: REAL&#xa;+ purchase_date: DATE&#xa;+ account_id: TEXT" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="18">
          <mxGeometry y="40" width="250" height="140" as="geometry" />
        </mxCell>
        <mxCell id="20" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="18">
          <mxGeometry y="180" width="250" height="8" as="geometry" />
        </mxCell>
        <mxCell id="21" value="+ calculate_gain(): REAL" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="18">
          <mxGeometry y="188" width="250" height="12" as="geometry" />
        </mxCell>
        
        <!-- AccountManager -->
        <mxCell id="22" value="AccountManager" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#e6e6e6;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="100" y="500" width="250" height="150" as="geometry" />
        </mxCell>
        <mxCell id="23" value="- db_service: ModuleDatabaseService&#xa;- user_id: str" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="22">
          <mxGeometry y="26" width="250" height="44" as="geometry" />
        </mxCell>
        <mxCell id="24" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="22">
          <mxGeometry y="70" width="250" height="8" as="geometry" />
        </mxCell>
        <mxCell id="25" value="+ create_account(name, type): Account&#xa;+ get_accounts(): List[Account]&#xa;+ update_balance(account_id, amount): void&#xa;+ delete_account(account_id): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="22">
          <mxGeometry y="78" width="250" height="72" as="geometry" />
        </mxCell>
        
        <!-- TransactionManager -->
        <mxCell id="26" value="TransactionManager" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="400" y="500" width="300" height="180" as="geometry" />
        </mxCell>
        <mxCell id="27" value="- db_service: ModuleDatabaseService&#xa;- user_id: str&#xa;- category_classifier: CategoryClassifier" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="26">
          <mxGeometry y="26" width="300" height="54" as="geometry" />
        </mxCell>
        <mxCell id="28" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="26">
          <mxGeometry y="80" width="300" height="8" as="geometry" />
        </mxCell>
        <mxCell id="29" value="+ add_transaction(trans): Transaction&#xa;+ get_transactions(filters): List[Transaction]&#xa;+ categorize_transaction(trans_id): void&#xa;+ import_csv(file_path, date_range): List[Transaction]&#xa;+ export_transactions(format): bytes" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="26">
          <mxGeometry y="88" width="300" height="92" as="geometry" />
        </mxCell>
        
        <!-- TaxReportGenerator -->
        <mxCell id="30" value="TaxReportGenerator" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="750" y="500" width="350" height="180" as="geometry" />
        </mxCell>
        <mxCell id="31" value="- transaction_manager: TransactionManager&#xa;- account_manager: AccountManager&#xa;- tax_categories: dict" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="30">
          <mxGeometry y="26" width="350" height="54" as="geometry" />
        </mxCell>
        <mxCell id="32" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="30">
          <mxGeometry y="80" width="350" height="8" as="geometry" />
        </mxCell>
        <mxCell id="33" value="+ generate_austrian_tax_report(year): dict&#xa;+ calculate_deductibles(): dict&#xa;+ generate_e1_form(): bytes&#xa;+ generate_income_statement(): dict&#xa;+ export_to_finanzamt_format(): bytes" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="30">
          <mxGeometry y="88" width="350" height="92" as="geometry" />
        </mxCell>
        
        <!-- CSVImporter -->
        <mxCell id="34" value="CSVImporter" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="1150" y="500" width="300" height="150" as="geometry" />
        </mxCell>
        <mxCell id="35" value="- supported_banks: List[str]&#xa;- date_parser: DateParser" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="34">
          <mxGeometry y="26" width="300" height="44" as="geometry" />
        </mxCell>
        <mxCell id="36" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="34">
          <mxGeometry y="70" width="300" height="8" as="geometry" />
        </mxCell>
        <mxCell id="37" value="+ import_raiffeisen(file): List[Transaction]&#xa;+ import_erste(file): List[Transaction]&#xa;+ import_sparkasse(file): List[Transaction]&#xa;+ detect_bank_format(file): str" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="34">
          <mxGeometry y="78" width="300" height="72" as="geometry" />
        </mxCell>
        
        <!-- Austrian Tax Categories -->
        <mxCell id="38" value="«enumeration»&#xa;AustrianTaxCategory" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1300" y="250" width="200" height="180" as="geometry" />
        </mxCell>
        <mxCell id="39" value="WERBUNGSKOSTEN&#xa;SONDERAUSGABEN&#xa;BETRIEBSAUSGABEN&#xa;AUSSERGEWOEHNLICHE_BELASTUNGEN&#xa;EINKUENFTE_VERMIETUNG&#xa;EINKUENFTE_KAPITAL&#xa;EINKUENFTE_SELBSTAENDIG&#xa;EINKUENFTE_NICHTSELBSTAENDIG" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="38">
          <mxGeometry y="40" width="200" height="140" as="geometry" />
        </mxCell>
        
        <!-- Relationships -->
        <mxCell id="40" value="manages" style="endArrow=diamondThin;endFill=1;endSize=16;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="41" value="manages" style="endArrow=diamondThin;endFill=1;endSize=16;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="42" value="uses" style="endArrow=open;endSize=12;dashed=1;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="43" value="creates" style="endArrow=open;endSize=12;dashed=1;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="22" target="6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="44" value="creates" style="endArrow=open;endSize=12;dashed=1;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="26" target="10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="45" value="uses" style="endArrow=open;endSize=12;dashed=1;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="26" target="34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="46" value="uses" style="endArrow=open;endSize=12;dashed=1;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="30" target="38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>